# Food Tracker - ะขัะตะบะตั ะตะดั ั ะฐะฝะฐะปะธะทะพะผ ะธะทะพะฑัะฐะถะตะฝะธะน

ะกะธััะตะผะฐ ัะพััะพะธั ะธะท ะดะฒัั ัะฐััะตะน:
- **pyapp-web** - ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- **chain-server** - ัะตัะฒะตั ะดะปั ะฐะฝะฐะปะธะทะฐ ะธะทะพะฑัะฐะถะตะฝะธะน ะตะดั ั ะฟะพะผะพััั LangChain ะธ OpenAI

## ะัััััะน ััะฐัั

### 1. ะะฐะฟััะบ ัะตัะฒะตัะฐ ะฐะฝะฐะปะธะทะฐ ะธะทะพะฑัะฐะถะตะฝะธะน

```bash
cd chain-server
export OPENAI_API_KEY='your-openai-api-key'
export EDAMAM_APP_ID='your-edamam-app-id'
export EDAMAM_APP_KEY='your-edamam-app-key'
pip install -r requirements.txt
python server.py
```

ะกะตัะฒะตั ะฑัะดะตั ะดะพัััะฟะตะฝ ะฝะฐ `http://localhost:8000`

### 2. ะะฐะฟััะบ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั

```bash
cd pyapp-web
pip install -r requirements.txt
cp config.example.yaml config.yaml
# ะััะตะดะฐะบัะธััะนัะต config.yaml ะฟะพะด ัะฒะพะธ ะฝัะถะดั
python app.py
```

ะะตะฑ-ะฟัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะดะพัััะฟะฝะพ ะฝะฐ `http://localhost:5001`

## ะะพะฝัะธะณััะฐัะธั

### Chain Server (chain-server/config.yaml)

```yaml
server:
  host: "0.0.0.0"
  port: 8000

image_recognition_model:
  model: "gpt-4o"
  temperature: 0.1
  max_tokens: 1000

analyze_nutrients_model:
  model: "gpt-4o"
  temperature: 0.5
  max_tokens: 800
  timeout: 45

edamam:
  base_url: "https://api.edamam.com/api/food-database/v2/parser"
  timeout: 30
  max_results: 10

logging:
  file: "logs/api_requests.log"
  level: "INFO"
  max_size_mb: 50
  backup_count: 5
```

#### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะะต ััะฐะฝะธัะต `EDAMAM_APP_ID` ะธ `EDAMAM_APP_KEY` ะฒ `config.yaml`. ะะฐะดะฐะนัะต ะธั ัะตัะตะท ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ะบะฐะบ `OPENAI_API_KEY`):

```bash
export EDAMAM_APP_ID='your-edamam-app-id'
export EDAMAM_APP_KEY='your-edamam-app-key'
```

### Web App (pyapp-web/config.yaml)

```yaml
server:
  host: "0.0.0.0"
  port: 5001
  debug: true

database:
  url: "sqlite:///app.db"

upload:
  folder: "uploads"
  max_content_length_mb: 16
  allowed_extensions: ["png", "jpg", "jpeg", "gif", "webp"]
```

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    HTTP API     โโโโโโโโโโโโโโโโโโโ
โ   Web App       โโโโโโโโโโโโโโโโโโบโ   Chain Server  โ
โ   (Flask)       โ /analyze_image  โ   (LangServe)   โ
โ   Port: 5001    โ /analyze_nutrients    Port: 8000    โ
โโโโโโโโโโโโโโโโโโโ                 โโโโโโโโโโโโโโโโโโโ
         โ                                   โ
         โผ                                   โผ
โโโโโโโโโโโโโโโโโโโ                โโโโโโโโโโโโโโโโโโโ
โ   SQLite DB     โ                โ   OpenAI API    โ
โ   (User data)   โ                โ   (gpt-4o)      โ
โโโโโโโโโโโโโโโโโโโ                โโโโโโโโโโโโโโโโโโโ
                                             โ
                                             โผ
                                   โโโโโโโโโโโโโโโโโโโ
                                   โ   Edamam API    โ
                                   โ (Food Database) โ
                                   โโโโโโโโโโโโโโโโโโโ
```

**ะะพัะพะบ ะดะฐะฝะฝัั:**

### ะะฝะฐะปะธะท ะธะทะพะฑัะฐะถะตะฝะธะน:
1. ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะณััะถะฐะตั ะธะทะพะฑัะฐะถะตะฝะธะต ะฒ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต
2. Web App ัะพััะฐะฝัะตั ัะฐะนะป ะธ ะผะตัะฐะดะฐะฝะฝัะต ะฒ SQLite
3. ะัะธ ะฝะฐะถะฐัะธะธ "ะะฟัะตะดะตะปะธัั ะตะดั ะฝะฐ ะบะฐััะธะฝะบะต" Web App ะพัะฟัะฐะฒะปัะตั ะธะทะพะฑัะฐะถะตะฝะธะต ะฒ Chain Server
4. Chain Server ะฐะฝะฐะปะธะทะธััะตั ะธะทะพะฑัะฐะถะตะฝะธะต ัะตัะตะท OpenAI API (gpt-4o ั vision)
5. ะะตะทัะปััะฐั (ะฑะปัะดะฐ + ะบะพะปะธัะตััะฒะฐ) ะฒะพะทะฒัะฐัะฐะตััั ะฒ Web App ะธ ัะพััะฐะฝัะตััั ะฒ ะฑะฐะทะต
6. ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ััััะบัััะธัะพะฒะฐะฝะฝัะน ัะตะทัะปััะฐั ะฐะฝะฐะปะธะทะฐ

### ะะฝะฐะปะธะท ะฝัััะธะตะฝัะพะฒ:
1. ะะพัะปะต ะฐะฝะฐะปะธะทะฐ ะธะทะพะฑัะฐะถะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะะฟัะตะดะตะปะธัั ะฝัััะธะตะฝัั"
2. Web App ะพัะฟัะฐะฒะปัะตั ะดะฐะฝะฝัะต ะพ ะฑะปัะดะฐั ะฒ Chain Server `/analyze-nutrients`
3. Chain Server ะทะฐะฟัะฐัะธะฒะฐะตั ะดะฐะฝะฝัะต ะพ ะฟัะพะดัะบัะฐั ะธะท Edamam Food Database API
4. Chain Server ะธัะฟะพะปัะทัะตั OpenAI API ะดะปั ะฐะฝะฐะปะธะทะฐ ะธ ัะฐััะตัะฐ ะฟะธัะฐัะตะปัะฝะพะน ัะตะฝะฝะพััะธ
5. ะะตะทัะปััะฐั (ะบะฐะปะพัะธะธ, ะฑะตะปะบะธ, ะถะธัั, ัะณะปะตะฒะพะดั) ะฒะพะทะฒัะฐัะฐะตััั ะฒ Web App
6. ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ะดะตัะฐะปัะฝัั ะธะฝัะพัะผะฐัะธั ะพ ะฟะธัะฐัะตะปัะฝะพะน ัะตะฝะฝะพััะธ

## ะะพะทะผะพะถะฝะพััะธ

- ๐ ะะตะณะธัััะฐัะธั ะธ ะฐะฒัะพัะธะทะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- ๐ง ะะพะดัะฒะตัะถะดะตะฝะธะต email ะธ ัะฑัะพั ะฟะฐัะพะปั
- ๐ธ ะะฐะณััะทะบะฐ ะธะทะพะฑัะฐะถะตะฝะธะน ะตะดั
- ๐ค ะะฝะฐะปะธะท ะธะทะพะฑัะฐะถะตะฝะธะน ั ะฟะพะผะพััั OpenAI GPT-4o
- ๐ ะะฟัะตะดะตะปะตะฝะธะต ะฑะปัะด ะธ ะธั ะผะฐััั
- ๐ฅ ะะฝะฐะปะธะท ะฟะธัะฐัะตะปัะฝะพะน ัะตะฝะฝะพััะธ ัะตัะตะท Edamam API
- ๐ ะะฐััะตั ะบะฐะปะพัะธะน, ะฑะตะปะบะพะฒ, ะถะธัะพะฒ ะธ ัะณะปะตะฒะพะดะพะฒ
- ๐ ะััะพัะธั ะทะฐะณััะทะพะบ ะธ ะฐะฝะฐะปะธะทะพะฒ
- ๐ ะะฒััััะฐะฟะฝัะน ะฐะฝะฐะปะธะท: ะธะทะพะฑัะฐะถะตะฝะธะต โ ะฝัััะธะตะฝัั
- ๐ ะะพะณะธัะพะฒะฐะฝะธะต API ะทะฐะฟัะพัะพะฒ
- ๐จ ะกะพะฒัะตะผะตะฝะฝัะน responsive ะดะธะทะฐะนะฝ

## ะะฐะทัะฐะฑะพัะบะฐ

### ะขัะตะฑะพะฒะฐะฝะธั

- Python 3.12+
- OpenAI API ะบะปัั
- ะกะพะฒัะตะผะตะฝะฝัะน ะฑัะฐัะทะตั

### ะฃััะฐะฝะพะฒะบะฐ ะดะปั ัะฐะทัะฐะฑะพัะบะธ

```bash
# ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
git clone <repository-url>
cd food-tracker

# ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ ะดะปั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั
cd pyapp-web
pip install -r requirements.txt
cp config.example.yaml config.yaml

# ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ ะดะปั ัะตัะฒะตัะฐ ะฐะฝะฐะปะธะทะฐ
cd ../chain-server
pip install -r requirements.txt

# ะะฐัััะพะนัะต API ะบะปััะธ
export OPENAI_API_KEY='your-openai-api-key'
export EDAMAM_APP_ID='your-edamam-app-id'
export EDAMAM_APP_KEY='your-edamam-app-key'
```

### ะะฐะฟััะบ ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ

ะัะบัะพะนัะต ะดะฒะฐ ัะตัะผะธะฝะฐะปะฐ:

**ะขะตัะผะธะฝะฐะป 1 - Chain Server:**
```bash
cd chain-server
python server.py
```

**ะขะตัะผะธะฝะฐะป 2 - Web App:**
```bash
cd pyapp-web
python app.py
```

## API Endpoints

### Chain Server (ะฟะพัั 8000)

- `POST /analyze` - ะะฝะฐะปะธะท ะธะทะพะฑัะฐะถะตะฝะธั (ะพะฟัะตะดะตะปะตะฝะธะต ะฑะปัะด)
- `POST /analyze-nutrients` - ะะฝะฐะปะธะท ะฟะธัะฐัะตะปัะฝะพะน ัะตะฝะฝะพััะธ ะฑะปัะด
- `GET /health` - ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั ัะตัะฒะตัะพะฒ ะธ API
- `GET /docs` - Swagger ะดะพะบัะผะตะฝัะฐัะธั
- `GET /langserve` - LangServe playground

### Web App (ะฟะพัั 5001)

- `GET /` - ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ
- `POST /upload` - ะะฐะณััะทะบะฐ ะธะทะพะฑัะฐะถะตะฝะธั
- `POST /analyze_image` - ะัะพะบัะธัะพะฒะฐะฝะธะต ะบ chain-server /analyze
- `POST /analyze_nutrients` - ะัะพะบัะธัะพะฒะฐะฝะธะต ะบ chain-server /analyze-nutrients
- `GET /history` - ะััะพัะธั ะทะฐะณััะทะพะบ ะธ ะฐะฝะฐะปะธะทะพะฒ
- `POST /register` - ะะตะณะธัััะฐัะธั
- `POST /login` - ะะฒัะพัะธะทะฐัะธั
- `GET /get_analysis/<filename>` - ะะพะปััะตะฝะธะต ัะพััะฐะฝะตะฝะฝะพะณะพ ะฐะฝะฐะปะธะทะฐ

## ะะปะฐะฝั ัะฐะทะฒะธัะธั

- โ ~~ะะฝัะตะณัะฐัะธั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั ั chain-server~~ (ัะตะฐะปะธะทะพะฒะฐะฝะพ)
- โ ~~ะะพะฑะฐะฒะปะตะฝะธะต ะฟะธัะฐัะตะปัะฝะพะน ัะตะฝะฝะพััะธ ะฑะปัะด~~ (ัะตะฐะปะธะทะพะฒะฐะฝะพ)
- โ ~~ะะพะณะธัะพะฒะฐะฝะธะต API ะทะฐะฟัะพัะพะฒ~~ (ัะตะฐะปะธะทะพะฒะฐะฝะพ)
- ๐ ะกัะฐัะธััะธะบะฐ ะฟะพััะตะฑะปะตะฝะธั ะธ ะดะฝะตะฒะฝะธะบ ะฟะธัะฐะฝะธั
- ๐ฏ ะฆะตะปะธ ะฟะพ ะบะฐะปะพัะธัะผ ะธ ะผะฐะบัะพะฝัััะธะตะฝัะฐะผ
- ๐ ะัะฐัะธะบะธ ะธ ะฐะฝะฐะปะธัะธะบะฐ ะฟะพััะตะฑะปะตะฝะธั
- ๐ฝ๏ธ ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะฟะธัะฐะฝะธั
- ๐ฑ ะะพะฑะธะปัะฝะฐั ะฒะตััะธั ะธ PWA
- ๐ง Docker ะบะพะฝัะตะนะฝะตัั
- ๐ Deployment ะธะฝััััะบัะธะธ
- ๐ ะะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ัะทัะบะพะฒ
- ๐ ะญะบัะฟะพัั ะดะฐะฝะฝัั (PDF, Excel)