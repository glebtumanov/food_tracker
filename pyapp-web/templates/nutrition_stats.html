<!DOCTYPE html>
<html lang="ru" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è - Food Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head>
<body class="bg-dark text-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-secondary">
        <div class="container">
            <a class="navbar-brand fw-bold" href="{{ url_for('index') }}">üçΩÔ∏è Food Tracker</a>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('history') }}">–ò—Å—Ç–æ—Ä–∏—è</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="{{ url_for('nutrition_stats') }}">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('logout') }}">–í—ã—Ö–æ–¥</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <div class="row">
            <div class="col-12">
                <h2 class="display-5 mb-4">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è</h2>
                <p class="text-muted mb-4">–°—É–º–º–∞—Ä–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ –ø–æ –¥–Ω—è–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü</p>

                {% if daily_stats %}
                <div class="table-responsive">
                    <table class="table table-dark table-striped table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col" class="align-top">–î–∞—Ç–∞</th>
                                <th scope="col" class="align-top">–§–æ—Ç–æ</th>
                                <th scope="col" class="align-top">–ö–∞–ª–æ—Ä–∏–∏, –∫–∫–∞–ª</th>
                                <th scope="col" class="align-top">–ë–µ–ª–∫–∏, –≥</th>
                                <th scope="col" class="align-top">–ñ–∏—Ä—ã, –≥</th>
                                <th scope="col" class="align-top">–£–≥–ª–µ–≤–æ–¥—ã, –≥</th>
                                <th scope="col" class="align-top">–ö–ª–µ—Ç—á–∞—Ç–∫–∞, –≥</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for day in daily_stats %}
                            <tr>
                                <td>
                                    <strong>{{ day.date.strftime('%d.%m.%Y') }}</strong><br>
                                    <small class="text-muted">{{ day.date|ru_weekday }}</small>
                                </td>
                                <td>
                                    <strong>{{ day.uploads_count }}</strong>
                                </td>
                                <td>
                                    <strong>{{ "%.0f"|format(day.calories) }}</strong>
                                </td>
                                <td>
                                    <strong>{{ "%.1f"|format(day.protein) }}</strong>
                                </td>
                                <td>
                                    <strong>{{ "%.1f"|format(day.fat) }}</strong>
                                </td>
                                <td>
                                    <strong>{{ "%.1f"|format(day.carbohydrates) }}</strong>
                                </td>
                                <td>
                                    <strong>{{ "%.1f"|format(day.fiber) }}</strong>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tfoot class="table-dark">
                            <tr class="table-primary">
                                <th>–ò—Ç–æ–≥–æ –∑–∞ –º–µ—Å—è—Ü:</th>
                                <th>{{ daily_stats|sum(attribute='uploads_count') }}</th>
                                <th>{{ "%.0f"|format(daily_stats|sum(attribute='calories')) }}</th>
                                <th>{{ "%.1f"|format(daily_stats|sum(attribute='protein')) }}</th>
                                <th>{{ "%.1f"|format(daily_stats|sum(attribute='fat')) }}</th>
                                <th>{{ "%.1f"|format(daily_stats|sum(attribute='carbohydrates')) }}</th>
                                <th>{{ "%.1f"|format(daily_stats|sum(attribute='fiber')) }}</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <div class="mt-4 p-3 bg-secondary bg-opacity-25 rounded">
                    <h6 class="text-info mb-2">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h6>
                    <ul class="small text-muted mb-0">
                        <li>–ü–æ–∫–∞–∑–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π</li>
                        <li>–£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –Ω—É—Ç—Ä–∏–µ–Ω—Ç–∞–º–∏</li>
                        <li>–î–∞–Ω–Ω—ã–µ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –ø–æ –≤—Å–µ–º –±–ª—é–¥–∞–º –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –¥–Ω—è</li>
                        <li>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ —Å –∞–Ω–∞–ª–∏–∑–æ–º –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤</li>
                    </ul>
                </div>

                {% else %}
                <div class="text-center py-5">
                    <div class="mb-4">
                        <i class="display-1 text-muted">üìä</i>
                    </div>
                    <h4 class="text-muted">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</h4>
                    <p class="text-muted">
                        –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π —Å –∞–Ω–∞–ª–∏–∑–æ–º –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.<br>
                        <a href="{{ url_for('index') }}" class="text-primary">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ</a> –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.
                    </p>
                </div>
                {% endif %}

                <div class="mt-4 text-center">
                    <a href="{{ url_for('history') }}" class="btn btn-outline-secondary me-2">
                        ‚Üê –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫
                    </a>
                    <a href="{{ url_for('index') }}" class="btn btn-primary">
                        –ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>